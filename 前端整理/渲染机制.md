渲染机制
====
渲染机制
>什么是DOCTYPE及作用
* DTD（document type definition：文档类型定义）是一系列的语法规则，用来定义XML和HTML的文件类型。
浏览器会根据它来判断文档类型，决定使用何种协议来解析，以及切换浏览器模式。
* DOCTYPE是告知浏览器当前文档是什么类型的
* H5----<!DOCTYPE html>
* H4分为两个模式strict（严格模式）和transitional（传统模式），
区别是包不包括展示性和弃用的元素。

>浏览器的渲染过程

![11](https://github.com/XinLi96/VueTest/blob/master/img/xuanran.png)
* 根据HTML生成DOM tree和CSS生成的CSSOM tree形成渲染树（render tree）

>重排Reflow
* DOM结构中的每个元素都有自己的盒子（模型），这些都需要浏览器根据各种样式来计算
并根据计算结果将元素放到她该出现的位置，这个过程称为重排。

>触发reflow（怎么避免触发reflow）
* 增加、删除、修改DOM节点
* 移动DOM的位置，比如动画
* 修改CSS样式（width、height等）
* 修改网页默认字体

>重绘Repaint
* 当页面中的元素的外观属性确定时（如颜色、大小），浏览器会绘制一遍改变的元素
，这个过程称为repaint。

>触发reflow
* DOM改动
* CSS改动

>如何尽量减少repaint的次数？
* 创建一个片段，然后将所有需要repaint的元素都加到片段中，然后将这个片段加入页面中。

>布局Layout

JS运行机制
````
console.log(1);
setTimeout(function(){
    console.log(2);
},0)
console.log(3);
//1,3,2
````
> 如何理解JS的单线程
* js是单线程的，js在一个时间点只能做一件事情。
> 什么是任务队列
* setTimeout和setInterval是异步任务，在js中同步运行的是同步任务，执行到异步任务的时候先挂起，
同步任务处理完之后才会去处理异步任务
````
for(var i = 0;i < 4;i++){
    setTimeout(function(){
        console.log(i);
    },1000);
}
//4,4,4,4
````
* 在for循环中，setTimeout会把自己交给时间模块管理，只有到了时间才会被加入到异步队列
中
* 当时间设置为0ms的时候，之前的版本是最小10ms现在是4ms（定时器的时间最小值）。
>什么是Event Loop（事件循环）
![22](https://github.com/XinLi96/VueTest/blob/master/img/eventLoop.png)
* 同步队列的执行完才会去异步队列执行

>异步任务有哪些？
* setTimeout和setInterval
* DOM事件（比如：点击事件）
* ES6中的promise

页面性能
>提升页面性能的的方法有哪些？
* 1、资源压缩合并，减少HTTP请求
* 2、非核心代码异步加载->异步加载的方式->异步加载的区别
* 3、利用浏览器缓存->缓存的分类->缓存的原理
* 4、使用CDN
* 5、预解析DNS（在高级浏览器中都是默认打开预解析的，如果是https协议开头是默认关闭预解析的）
````
<meta http-equiv="x-dns-pefetch-control" content="on">
<link rel="dns-prefetch" href="">//主要是这句
````
>异步加载的方式
* 1、动态脚本加载（动态创建script标签）
* 2、defer
* 3、async

>异步加载的区别
* （1）defer是在HTML解析完之后才会执行，如果是多个，按照加载的顺序依次执行
* （2）async是加载完之后立即执行，如果是多个，执行顺序和加载顺序无关

>缓存的分类
* 1、强缓存
* 2、协商缓存

错误监控






















